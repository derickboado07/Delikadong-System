<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sales Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="Sales Report.css" />
</head>
<body>
<?php include '../include/navbar.php'; ?>

  <!-- Main Content -->
  <div class="main-content">
    <!-- White Background Header -->
    <div class="dashboard-header">
      <h2>ARAT COFFEE SALES DASHBOARD</h2>
      <div class="filter">
        <input type="date" id="startDate" />
        <input type="date" id="endDate" />
        <button id="applyFilter">Apply Filter</button>
      </div>
    </div>

    <!-- Summary Cards -->
    <div class="cards">
      <div class="card">
        <h4>Gross Sales</h4>
        <p class="value" id="grossSales">₱0</p>
      </div>
      <div class="card">
        <h4>Order Today</h4>
        <p class="value" id="ordersToday">0 Orders</p>
      </div>
      <div class="card">
        <h4>Net Income</h4>
        <p class="value" id="netIncome">₱0</p>
      </div>
      <div class="card top-product">
        <h4>Top Product</h4>
        <p class="value" id="topProduct"><i class="fa-solid fa-star"></i> N/A</p>
      </div>
    </div>

    <!-- Charts -->
    <div class="charts">
      <div class="chart-box">
        <h3>Sales Trends <span>Daily Sales</span></h3>
        <canvas id="dailyChart"></canvas>
      </div>
      <div class="chart-box">
        <h3>Monthly Sales <span id="monthlyStatus">up by 0% Compare last month</span></h3>
        <canvas id="monthlyChart"></canvas>
      </div>
    </div>

      <!-- Extra Sales Dashboard Section -->
  <div class="extra-dashboard">
    <div class="left-side">
      <!-- Product Performance -->
      <div class="extra-box performance-box">
        <h3>Product Performance</h3>
        <table class="performance-table">
          <tr>
            <th>Product Name</th>
            <th>Quantity Sold</th>
            <th>Sales</th>
          </tr>
          <tr><td>Iced Latte</td><td>159</td><td>₱15,600</td></tr>
          <tr><td>Cappuccino</td><td>127</td><td>₱13,860</td></tr>
          <tr><td>Caramel Macchiato</td><td>121</td><td>₱13,740</td></tr>
          <tr><td>Salted Caramel</td><td>104</td><td>₱12,550</td></tr>
        </table>
      </div>

      <!-- Payment Breakdown -->
      <div class="extra-box payment-box rounded-container">
        <h3 class="payment-title">Payment Breakdown</h3>
        <div class="chart-container">
          <canvas id="paymentChart"></canvas>
          <div class="legend">
            <span><span class="dot cash"></span> Cash</span>
            <span><span class="dot gcash"></span> Gcash</span>
            <span><span class="dot qrph"></span> QRPH</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Orders -->
    <div class="extra-box orders-box">
      <h3>Recent Orders</h3>
      <table class="orders-table">
        <tr><th>Order #</th><th>Amount</th><th>Date & Time</th></tr>
        <tr><td>3211</td><td>₱160</td><td>06-15-25, 21:22</td></tr>
        <tr><td>3210</td><td>₱170</td><td>06-15-25, 21:15</td></tr>
        <tr><td>3209</td><td>₱200</td><td>06-15-25, 21:01</td></tr>
        <tr><td>3208</td><td>₱380</td><td>06-15-25, 20:52</td></tr>
        <tr><td>3207</td><td>₱175</td><td>06-15-25, 20:32</td></tr>
        <tr><td>3206</td><td>₱175</td><td>06-15-25, 19:26</td></tr>
        <tr><td>3205</td><td>₱240</td><td>06-15-25, 19:42</td></tr>
        <tr><td>3204</td><td>₱560</td><td>06-15-25, 18:43</td></tr>
        <tr><td>3203</td><td>₱690</td><td>06-15-25, 18:41</td></tr>
        <tr><td>3202</td><td>₱170</td><td>06-15-25, 18:35</td></tr>
        <tr><td>3201</td><td>₱170</td><td>06-15-25, 17:12</td></tr>
        <tr><td>3200</td><td>₱170</td><td>06-15-25, 17:10</td></tr>
        <tr><td>3199</td><td>₱165</td><td>06-15-25, 16:21</td></tr>
        <tr><td>3198</td><td>₱340</td><td>06-15-25, 15:54</td></tr>
      </table>
    </div>
  </div>

    </div>

  </div>

  <!-- Logout Confirmation Modal -->
  <div class="logout-modal" id="logoutModal">
    <div class="logout-modal-content">
      <span class="close-logout-modal">&times;</span>
      <h2>Confirm Logout</h2>
      <p>Are you sure you want to log out?</p>
      <div class="logout-buttons">
        <button class="cancel-logout">Cancel</button>
        <button class="confirm-logout">Logout</button>
      </div>
    </div>
  </div>

  <!-- Chart.js for graphs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Script for interactivity & dummy backend -->
  <script>
    // Dummy data (simulate database)
    const salesData = {
      "2025-09-10": { gross: 12450, orders: 56, net: 5546, top: "Iced Latte" },
      "2025-09-09": { gross: 8450, orders: 34, net: 3520, top: "Cappuccino" }
    };

    // Apply filter button
    document.getElementById("applyFilter").addEventListener("click", () => {
      const start = document.getElementById("startDate").value;
      const end = document.getElementById("endDate").value;

      // Example: Use only the "end date" as today's filter
      if (salesData[end]) {
        const data = salesData[end];
        document.getElementById("grossSales").innerText = "₱" + data.gross.toLocaleString();
        document.getElementById("ordersToday").innerText = data.orders + " Orders";
        document.getElementById("netIncome").innerText = "₱" + data.net.toLocaleString();
        document.getElementById("topProduct").innerHTML = '<i class="fa-solid fa-star"></i> ' + data.top;
      } else {
        alert("No data found for " + end);
      }
    });

    // Charts Example (dummy)
    const dailyCtx = document.getElementById("dailyChart").getContext("2d");
    new Chart(dailyCtx, {
      type: "bar",
      data: {
        labels: ["Mon", "Tue", "Wed", "Thu", "Fri"],
        datasets: [{
          label: "Daily Sales",
          data: [1200, 1900, 3000, 2500, 3200],
          borderColor: "#6ce5e8",
          backgroundColor: "#6ce5e8",
          fill: true
        }]
      }
    });

    const monthlyCtx = document.getElementById("monthlyChart").getContext("2d");
    new Chart(monthlyCtx, {
      type: "bar",
      data: {
        labels: ["May", "Jun", "Jul", "Aug", "Sep"],
        datasets: [{
          label: "Monthly Sales",
          data: [15000, 20000, 22000, 25000, 28000],
          backgroundColor: "#6ce5e8"
        }]
      }
    });

    // Payment Breakdown Pie Chart
    const paymentCtx = document.getElementById("paymentChart").getContext("2d");
    new Chart(paymentCtx, {
      type: "pie",
      data: {
        labels: ["Cash", "Gcash", "QRPH"],
        datasets: [{
          data: [50, 30, 20], // Dummy data percentages
          backgroundColor: ["green", "blue", "red"],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            display: false // Hide default legend, use custom
          }
        }
      }
    });

    // Logout confirmation modal functionality
    const logoutModal = document.getElementById('logoutModal');
    const signOutBtn = document.getElementById('signOutBtn');
    const closeLogoutModal = document.querySelector('.close-logout-modal');
    const cancelLogout = document.querySelector('.cancel-logout');
    const confirmLogout = document.querySelector('.confirm-logout');

    // Open modal when sign-out is clicked
    if (signOutBtn) {
        signOutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            logoutModal.style.display = 'flex';
        });
    }

    // Close modal when X is clicked
    if (closeLogoutModal) {
        closeLogoutModal.addEventListener('click', function() {
            logoutModal.style.display = 'none';
        });
    }

    // Close modal when cancel is clicked
    if (cancelLogout) {
        cancelLogout.addEventListener('click', function() {
            logoutModal.style.display = 'none';
        });
    }

    // Redirect to logout page when confirm is clicked
    if (confirmLogout) {
        confirmLogout.addEventListener('click', function() {
            window.location.href = '../MainPage/Mainpage.html';
        });
    }

    // Close modal if user clicks outside the modal content
    if (logoutModal) {
        logoutModal.addEventListener('click', function(e) {
            if (e.target === logoutModal) {
                logoutModal.style.display = 'none';
            }
        });
    }
  </script>
</body>
</html>
